{"filter":false,"title":"App.py","tooltip":"/chat/App.py","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":120,"column":16},"action":"insert","lines":["import streamlit as st","from streamlit_option_menu import option_menu","from user import User","from video_uploader import VideoUploader","from file_uploader import FileUploader","from data_from_api import Fetch","import matplotlib.pyplot as plt","","# ì´ˆê¸° ì„¸ì…˜ ìƒíƒœ ì„¤ì •","if 'ID' not in st.session_state:","    st.session_state.ID = \"\"","","# ì‚¬ì´ë“œë°” êµ¬ì„±","with st.sidebar:    ","    # ë©”ë‰´ êµ¬ì„±","    choice = option_menu(\"Menu\", [\"í™ˆ\",\"ë°ì´í„° ì—…ë¡œë“œ\", \"ë°ì´í„° ì‹œê°í™”\"],","                         icons=['bi bi-house','bi bi-cloud-arrow-up','bi bi-bar-chart-line'],","                         menu_icon = \"app-indicator\", default_index=0,","                         styles={","        \"container\": {\"padding\": \"4!important\", \"background-color\": \"#fafafa\"},","        \"icon\": {\"color\": \"black\", \"font-size\": \"25px\"},","        \"nav-link\": {\"font-size\": \"16px\", \"text-align\": \"left\", \"margin\":\"0px\", \"--hover-color\": \"#fafafa\"},","        \"nav-link-selected\": {\"background-color\": \"#08c7b4\"},","    }","    )","# ì‚¬ìš©ì ID ì…ë ¥ ë° ë¡œê·¸ì¸","if choice == \"í™ˆ\":","    st.title(\"ğŸ¤– X-men\") ","    st.subheader(\"ì‚¬ìš©ì ID\")","    user_id = st.text_input(\"\", \"\")","    if st.button(\"ë¡œê·¸ì¸\"):","        user = User(user_id)","        ID = user.login()","        if ID :","            st.session_state.ID = ID","            st.success(\"ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.\")","        else :","            st.error(\"ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.\")","","# ì˜ìƒ & ì´ë¯¸ì§€ ì—…ë¡œë“œ","elif choice == \"ë°ì´í„° ì—…ë¡œë“œ\":","    st.title(\"ğŸ¤– X-men\") ","    # IDë¥¼ ì…ë ¥ ë°›ì€ ê²½ìš°ì—ë§Œ ì—…ë¡œë“œë¥¼ ë°›ê¸°","    if st.session_state.ID: ","        st.subheader(\"ë°ì´í„° ì—…ë¡œë“œ\")","        # ì •í•´ì ¸ ìˆëŠ” ì˜ìƒ ì„ íƒ","        st.write(\"â¬†ï¸ì˜ìƒì„ ì„ íƒí•´ì£¼ì„¸ìš”\")","        # ë²„íŠ¼ ê°€ë¡œë¡œ ë°°ì—´ : ì„¸ ê°œì˜ ì—´ ìƒì„±","        col1, col2, col3 = st.columns(3)","        with col1:","            if st.button(\"1ë²ˆ ì˜ìƒ\"):","                video = VideoUploader(st.session_state.ID, 1)","                status, submit_message = video.video_submit()","                if status == \"success\":","                    st.success(submit_message)","                else:","                    st.error(submit_message)","        with col2:","            if st.button(\"2ë²ˆ ì˜ìƒ\"):","                video = VideoUploader(st.session_state.ID, 2)","                status, submit_message = video.video_submit()","                if status == \"success\":","                    st.success(submit_message)","                else:","                    st.error(submit_message)","        with col3:","            if st.button(\"3ë²ˆ ì˜ìƒ\"):","                video = VideoUploader(st.session_state.ID, 3)","                status, submit_message = video.video_submit()","                if status == \"success\":","                    st.success(submit_message)","                else:","                    st.error(submit_message)","","        # ë‹¤ë¥¸ ì˜ìƒ & ì´ë¯¸ì§€ ì—…ë¡œë“œ","        # ì´ë¯¸ì§€ ë° ë™ì˜ìƒ ì—…ë¡œë“œë¥¼ ìœ„í•œ íŒŒì¼ ì„ íƒ ì°½ í‘œì‹œ","        st.write(\"â¬†ï¸ë‹¤ë¥¸ ì´ë¯¸ì§€ë‚˜ ì˜ìƒì„ ì—…ë¡œë“œí•´ì£¼ì„¸ìš”\")","        uploaded_file = st.file_uploader(\"\",type=[\"jpg\", \"jpeg\", \"png\", \"mp4\"])","","        if uploaded_file is not None:","        ","            file_uploader = FileUploader(st.session_state.ID,uploaded_file)","    ","            if not file_uploader.is_image() and not file_uploader.is_video():","                st.error(\"ì˜¬ë°”ë¥¸ íŒŒì¼ í˜•ì‹ì´ ì•„ë‹™ë‹ˆë‹¤. ì´ë¯¸ì§€ ë˜ëŠ” ë™ì˜ìƒ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”.\")","            else:","                status, submit_message = file_uploader.upload_file()","                if status == \"success\":","                    st.success(submit_message)","                else:","                    st.error(submit_message)","","    else :","        st.warning(\"ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤. í™ˆì—ì„œ ë¡œê·¸ì¸í•´ì£¼ì„¸ìš”.\")","","# ë°ì´í„° ì‹œê°í™”","elif choice == \"ë°ì´í„° ì‹œê°í™”\":","    st.title(\"ğŸ¤– X-men\") ","    st.subheader(\"ë°ì´í„° ì‹œê°í™”\")","    if st.button(\"ğŸ“Šë‹¹ì¼ ë°ì´í„° ë‚´ì—­ í™•ì¸í•˜ê¸°\"):","        # API Gateway ì—”ë“œí¬ì¸íŠ¸ URL","        API_ENDPOINT = \"YOUR_API_ENDPOINT_URL_HERE\"","        fetch = Fetch(API_ENDPOINT)","        status, data = fetch.fetch_data_from_api()","        if status == \"success\":","            if data is not None:","                # ë°ì´í„° ì²˜ë¦¬","                categories = list(data.keys())","                values = [data[category] for category in categories]","","                # ê·¸ë˜í”„ ìƒì„±","                plt.bar(categories, values)","                plt.xlabel('ë¬¼í’ˆ')","                plt.ylabel('ê°œìˆ˜')","                plt.title('ë¬¼í’ˆ ê°œìˆ˜ ê·¸ë˜í”„')","                st.pyplot()","            else :","                st.error(\"Not data\")","        elif status == \"error\":","            st.error(data)","                "],"id":1}]]},"ace":{"folds":[],"scrolltop":1558,"scrollleft":0,"selection":{"start":{"row":120,"column":16},"end":{"row":120,"column":16},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":102,"state":"start","mode":"ace/mode/python"}},"timestamp":1716356393672,"hash":"43465c1a290d320efbe35ee7c24edaa87170b763"}